<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"   "http://www.w3.org/TR/html4/loose.dtd"><html lang="en"><head>	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">	<title>Wakanda Training - Model API (V5)</title>	<meta name="generator" content="TextMate http://macromates.com/">	<meta name="author" content="David Robbins">	<!-- Date: 2013-01-25 -->		<link rel="stylesheet" href="reveal/css/reveal.css">	<link rel="stylesheet" href="reveal/css/theme/wak.css" id="theme">	<!-- For syntax highlighting -->	<link rel="stylesheet" href="reveal/lib/css/zenburn.css">	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script></head><body><div id="container"><div class="reveal"><!-- Any section element inside of this container is displayed as a slide --><div class="slides spreadMore">	    <section>        <h2>Wakanda Intermediate Client-Side Training</h2>		<br/>        <p><strong>Model API (V5)</strong></p>        <br/> <br/>				<br/>		<p>Wakanda Studio Supports Two Different Modes to Define your Model</p>				<div id="spreadListItems">		<ul>			<li class="fragment">Guided Mode (default)<span class="fragment subtext"><br/>Datastore class descriptions are edited using the Graphical Datastore Model Designer.</span></li>			<li class="fragment">Advanced Edition Mode<span class="fragment subtext"><br/>This mode is required to use Wakanda's Model API to define the Datastore classes.</span></li>		</ul>		</div>	</section>	<!---	<br/>		<div class="fragment">		<p>In <strong>Guided Mode</strong> all the Javascript code related to your Data Classes is stored in one file.</p> 		<p>In <strong>Advance Mode</strong> you can break up your code into multiple files.</p>		</div>	-->	<section>        <h2>Advanced Edition Mode</h2>		<br/>        <p><strong>Advantages of The Advanced Edition Mode</strong></p>        <br/><br/> 		<br/><br/> 		<p>In Advanced Edition Mode you can break up your code into multiple files.</p>		<br/><br/>		<p>This is essential for large projects and can lead to code efficiency.</p>	</section>	<section>        <h2>Activating the Advanced Mode</h2>		<br/>        <p><strong>The Advanced edition mode must be set explicitly in your model.</strong></p>        <br/><br/> 		<br/>		<p>To be able to write the initialization code for the JavaScript model object, you need to unlock and remove the guidedModel object definition.</p>		<br/><br/> 		<p> To do this, just click on the Go to advanced model button in the Datastore Model Designer toolbar.</p>		<br/>		<p><img src="/images/unlock.png" alt="lock" height="39" width="386"></p>	</section>	<section>        <h2>Initializing the Model Object </h2>		<br/>        <p><strong>The Model object contains the JavaScript Model Description.</strong></p>        <br/> 		<p>The model object must be defined in the "Model.js" file stored at the root of your Wakanda project.</p><br/>		<p>Execute a new <strong>DataStoreCatalog( )</strong> call in the "Model.js" file in order to instantiate the model object.</p>		<br/>		<p class="fragment">Use <strong>include</strong> statement to separate your dataclass defintions into different files.</p>		<br/>		<strong>Model.js</strong><br/><pre><code>	model = new DataStoreCatalog();	<span class="fragment">	include("classes/utility.js");	include("classes/activity.js");	include("classes/user.js");	include("classes/lead.js");	include("classes/contact.js");	include("classes/account.js");	include("classes/recentItem.js");	include("classes/note.js");	</span></code></pre>	</section>	<section>        <h2>Adding DataClasses and Attributes to the Model</h2>		<br/>        <p><strong>Dataclass and Attributes Constructors</strong></p>		<br/>		<p><strong>DataClass</strong>( collectionName [, scope] )</p>		<p class="fragment"><strong>Attribute</strong>( kind, type [, index, [, options object]])</p>				<br/>		<strong>classes/lead.js</strong><br/><pre><code> //Creating the Lead dataclass model.Lead = new DataClass("Leads");<div class="fragment"> //Add Lead attributes. model.Lead.ID = new Attribute("storage", "long", "key auto"); model.Lead.firstName = new Attribute("storage", "string", {not_null : true }); model.Lead.lastName = new Attribute("storage", "string", "btree"); model.Lead.fullName = new Attribute("calculated", "string"); model.Lead.converted = new Attribute("storage", "bool", "cluster"); model.Lead.convertedDate = new Attribute("storage", "date"); model.Lead.rating = new Attribute("storage", "long", null, {"minValue": "0", "maxValue": "100"});	</div></code></pre>	</section>	<section>	 	<h2>Attributes</h2>		<br/>        <br/><br/>		<strong>Kinds of Attributes:</strong><br/><br/> 				<ul>			<li>storage 		<span class="fragment subtext">&nbsp;(simple scalar values - string, long, ...)</span></li>			<li>calculated		<span class="fragment subtext">&nbsp;(to store scalar values based on a calculation)</span></li>			<li>alias 			<span class="fragment subtext">&nbsp;(an attribute built upon a relation attribute)</span></li>			<li>relatedEntity	<span class="fragment subtext">&nbsp;(n->1 relation attribute)</span></li>			<li>relatedEntities <span class="fragment subtext">&nbsp;(1->n relation attribute)</span></li>		</ul>	</section>	<section>	 	<h2>Attributes</h2>		<br/>		<strong>Storage and calculated attribute types:</strong><br/><br/> 				<ul>			<li>blob</li>			<li>bool</li>			<li>byte</li>			<li>date</li>			<li>duration</li>			<li>image</li>			<li>long</li>			<li>long64</li>			<li>number</li>			<li>string</li>			<li>uuid</li>			<li>word</li>		</ul>	</section>	<section>        <h2>Adding Relation Attributes to the Model</h2>		<br/>		<p>Attribute( kind, type , path [, options object] )</p>		<br/>		<div class=" fragment tight">		<ul>			<li><strong>kind</strong> is "relatedEntity".</li>			<li><strong>type</strong> is the datastore class name corresponding to the 'one' class.</li>			<li><strong>path</strong> is implicit and built upon the type. Just pass the relation datastore class name.</li>		</ul>		</div>				<br/><strong>classes/lead.js</strong><br/><pre><code> //Relation to the User class (n > 1). model.Lead.owner = new Attribute("relatedEntity", "User", "User"); </code></pre>		<br/><br/>	<br/><strong>classes/user.js</strong><br/><pre><code> //Relation to the Lead class (1 < n). model.User.leadCollection = new Attribute("relatedEntities", "Leads", "owner"    , {reversePath:true});</code></pre>	<br/><br/>	<div class=" fragment tight">		<ul>			<li><strong>kind</strong> is "relatedEntities".</li>			<li><strong>type</strong> is the datastore class collection name corresponding to the 'many' class.</li>			<li><strong>path</strong> can use the reverse path of an existing "relatedEntity" attribute.</li>		</ul>	</div>	</section>	<section>	 	<h2>Model Syntax</h2>		<br/>        <p>Use the following syntax to declare each object of the model that you want to create:</p>        <br/><br/>		<div class="notSoBig">		<p class="subtitle">Syntax for a method applied to an entity:</p>		<p>model.className.<strong>entityMethods</strong>.method1 = function ();</p>		<p>model.className.<strong>entityMethods</strong>.method2 = function ();</p>		<br/>		<p class="subtitle">Syntax for a method applied to a collection:</p>		<p>model.className.<strong>collectionMethods</strong>.method1 = function ();</p>		<p>model.className.<strong>collectionMethods</strong>.method2 = function ();</p>		<br/>		<p class="subtitle">Syntax for a method applied to a datastore class:</p>		<p>model.className.<strong>methods</strong>.method1 = function ();</p>		<p>model.className.<strong>methods</strong>.method2 = function ();</p>		<br/>		<p class="subtitle">Syntax for the scope of a datastore class method:</p>		<p>model.className.methods.methodName.<strong>scope</strong> ="public"</p>		<p>model.className.methods.methodName.<strong>scope</strong> ="publicOnServer"</p>		<br/>		</div>	</section>	<section>	 	<h2>Model Syntax Continued...</h2>		<br/>        <br/>						<p class="subtitle">Syntax for an attribute event:</p>		<p>model.className.attributeName.events.<strong>onInit</strong> = function();</p>		<p>model.className.attributeName.events.<strong>onLoad</strong> = function();</p>		<p>model.className.attributeName.events.<strong>onSet</strong> = function();</p>		<p>model.className.attributeName.events.<strong>onValidate</strong> = function();</p>		<p>model.className.attributeName.events.<strong>onSave</strong> = function();</p>		<p>model.className.attributeName.events.<strong>onRemove</strong> = function();</p>		<br/>				<p class="subtitle">Syntax for a datastore class event:</p>		<p>model.className.events.<strong>onInit</strong> = function();</p>		<p>model.className.events.<strong>onLoad</strong> = function();</p>		<p>model.className.events.<strong>onValidate</strong> = function();</p>		<p>model.className.events.<strong>onSave</strong> = function();</p>		<p>model.className.events.<strong>onRemove</strong> = function();</p>		<p>model.className.events.<strong>onRestrictingQuery</strong> = function();</p>		<br/>	</section>	<section>	 	<h2>Model Syntax Continued...</h2>		<br/>        <br/>		<p class="subtitle">Syntax for a calculated attribute:</p>		<p>model.className.attributeName.<strong>onGet</strong> = function() </p>		<p>model.className.attributeName.<strong>onSet</strong> = function() </p>		<p>model.className.attributeName.<strong>onQuery</strong> = function() </p>		<p>model.className.attributeName.<strong>onSort</strong> = function() </p>		<br/>	</section></div>	</div></div><!--left: 100%; margin-left: -120px;--><!--<div style="position: absolute; bottom: 20px;  background-color: black;"><img src="reveal/img/petitlogo.png"></div>--><script type="text/javascript" src="reveal/lib/js/head.min.js"></script><script type="text/javascript" src="reveal/js/reveal.js"></script><script type="text/javascript">var currentEntity;Reveal.initialize({	controls: true,	progress: true,	history: true,	center: true,	overview: true,	theme: Reveal.getQueryHash().theme, // available themes are in /css/theme	transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none	// Optional libraries used to extend on reveal.js	dependencies: [		{ src: 'reveal/lib/js/classList.js', condition: function() { return !document.body.classList; } },		{ src: 'reveal/plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },		{ src: 'reveal/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },		{ src: 'reveal/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },		{ src: 'reveal/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },		{ src: 'reveal/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }	//	{ src: 'reveal/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }	]});Reveal.addEventListener( 'slidechanged', function( event ) {	//debugger;    // event.previousSlide, event.currentSlide, event.indexh, event.indexv	if (event.indexh == 2 && event.indexv == 1) {		currentEntity = $('#wakandaCollection ul').children('li.currentEntity');		console.log(currentEntity);		//$('#wakandaCollection ul').children('li.currentEntity').click(function() {console.log("currentEntity");});	}} );//</script></body></html>