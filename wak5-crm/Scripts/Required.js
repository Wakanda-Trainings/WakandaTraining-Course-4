var WAK5CRM = WAK5CRM || {}; //Don't assume we are first to define WAK5CRM.WAK5CRM.customLogin = function (emailAddress, password) {	//Need permission to read User class for new session.	var sessionRef = currentSession(); // Get session.	var myUser = ds.User({email:emailAddress});	if (myUser === null) {		return false;	} else {		//we will handle login		if (myUser.validatePassword(password)) {			var theGroups = [];						switch (myUser.role) {				case "Administrator":				theGroups = ['Administrator'];				break;				case "Manager":				theGroups = ['Manager'];				break;				default:				theGroups = ['Employee'];				break;			}						var connectTime = new Date();			return {				ID: myUser.ID,				name: myUser.email, //myUser.login,				fullName: myUser.fullName, 				belongsTo: theGroups,				storage: {time: connectTime}			}					} else {					return {error: 1024, errorMessage: "invalid login"};		}			}} 